<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OSUisp2 USB Interface Library: C:/Users/Robert/Documents/Porn/Summer 2012/ECE111/tiny26usb/usb.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSUisp2 USB Interface Library
   &#160;<span id="projectnumber">1.1</span>
   </div>
   <div id="projectbrief">The library for sending and receiving data to the OSUisp2 and devices connected to it</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d522931ffa1371640980b621734a4381.html">Users</a></li><li class="navelem"><a class="el" href="dir_f64893e36f8c31d4c59df75761de097c.html">Robert</a></li><li class="navelem"><a class="el" href="dir_4d3d6b1b26f4b3c1d1a5f5a1fa4552ed.html">Documents</a></li><li class="navelem"><a class="el" href="dir_cfe56792dfb4991cf7565d8b56ed5418.html">Porn</a></li><li class="navelem"><a class="el" href="dir_31d3d5080e2ae2b1c79a8d65061935e8.html">Summer 2012</a></li><li class="navelem"><a class="el" href="dir_df6c73f6e81787aafd0f3dc5464309ca.html">ECE111</a></li><li class="navelem"><a class="el" href="dir_b7ebdf35d57cf8261ef840d6f9fbbd88.html">tiny26usb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">usb.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="usb_8h_source.html">usb.h</a>&quot;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaae4536e883a0f5e6691a72c7dfecd06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8c.html#aaae4536e883a0f5e6691a72c7dfecd06">UsbSendData</a> (<a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> *dev, <a class="el" href="usb_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> command, <a class="el" href="usb_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *dataToSend, int length, <a class="el" href="usb_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *outBuffer, int outBufferLength)</td></tr>
<tr class="separator:aaae4536e883a0f5e6691a72c7dfecd06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd6a9df244ea5040c331006b9e51f96"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8c.html#a7dd6a9df244ea5040c331006b9e51f96">UsbOpenDevice</a> (<a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> **device, int vendor, char *vendorName, int product, char *productName)</td></tr>
<tr class="separator:a7dd6a9df244ea5040c331006b9e51f96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca6768d7c49ac102c9e71cbd9cd9210b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8c.html#aca6768d7c49ac102c9e71cbd9cd9210b">UpdateServoPosition</a> (<a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> *dev, int position)</td></tr>
<tr class="separator:aca6768d7c49ac102c9e71cbd9cd9210b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6d4825145d4c1711e151faf2dfe559"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8c.html#a7d6d4825145d4c1711e151faf2dfe559">UsbEstablishConnection</a> (<a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> *dev)</td></tr>
<tr class="separator:a7d6d4825145d4c1711e151faf2dfe559"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8148ba440dcddccba1b57dfd40738d2b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8c.html#a8148ba440dcddccba1b57dfd40738d2b">UsbCloseDevice</a> (<a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> *dev)</td></tr>
<tr class="separator:a8148ba440dcddccba1b57dfd40738d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Robert L. Phillips III </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Code adapted from the Tiny26 test widget written by Ben Porter </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.1</dd></dl>
<h1><a class="anchor" id="SUMMARY"></a>
SUMMARY</h1>
<p>Project: tiny26usb.dll</p>
<p>Build Environment: Code::Blocks 10.05</p>
<p>Compiler: GNU GCC Compiler</p>
<p>Linked Libraries:</p>
<ul>
<li>libhid</li>
</ul>
<ul>
<li>libhidparse</li>
</ul>
<ul>
<li>libsetupapi</li>
</ul>
<h1><a class="anchor" id="LICENSE"></a>
LICENSE</h1>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</p>
<h1><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h1>
<p>Library definition for the tiny26usb library. This library allows the user to forward commands to the Tiny26 microcontroller using the OSUisp2 universal programmer. In order for this library to work, the Tiny26 must have the correct firmware installed because of the way the library checks to ensure that the Tiny26 is connected and receiving the commands from the computer.</p>
<p>This library is meant to abstract away the inner workings of the USB connection to the OSUisp2 and the Tiny26 for the purpose of an ECE111 demo.</p>
<p>Example Usage (for example Python usage, see the ECE111 Python GUI demo): </p>
<pre class="fragment">    usbDevice_t * dev;

    UsbOpenDevice(&amp;dev, 0x16c0, "beaversource.oregonstate.edu/projects/osuisp2", 0x05df, "OSUisp2");

    UsbEstablishConnection(dev);

    UsbUpdateServoPosition(dev, 150);

    UsbCloseDevice(dev);
</pre><h1><a class="anchor" id="HARDWARE"></a>
HARDWARE</h1>
<p>Target Device: OSUisp2 Universal Programmer </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aca6768d7c49ac102c9e71cbd9cd9210b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> int UpdateServoPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a request to the Tiny261 to update the motor position</p>
<p>Moves the motor unless 0 or 255 is given as the position parameter. If 0 is given as the position, the motor will not move and the Tiny will only respond with the solar measurements. If 255 is given as the position, it will cause the Tiny to search for the position with the highest solar measurements. If the given position is out of range (position range = 0 &lt;= position &lt;= 255), 1 or 254 will be sent instead depending on which extrema was violated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The handle to the USB device that corresponds to the connection between the computer, OSUisp2, and Tiny261 </td></tr>
    <tr><td class="paramname">position</td><td>The position that the motor is to be moved to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The return code that indicates whether the transmission was successful </dd></dl>

</div>
</div>
<a class="anchor" id="a8148ba440dcddccba1b57dfd40738d2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> void UsbCloseDevice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Closes the connection to the Tiny261 and OSUisp2 Universal Programmer</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The handle to the USB device that corresponds to the connection between the computer and the OSUisp2 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7d6d4825145d4c1711e151faf2dfe559"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> int UsbEstablishConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Establishes a connection to the Tiny261</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The handle to the USB device that corresponds to the connection between the computer and the OSUisp2</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="usb_8h.html#a98189233a203d9c3e33265b7a6bcc9eb">CONNECT_MODE_FAILED</a> </dd>
<dd>
<a class="el" href="usb_8h.html#af1f31626d1809a352c1f6001d2a8ff23">TINY_CONNECT_FAILED</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The return code that indicates whether a connection to the Tiny261 was successfully established </dd></dl>

</div>
</div>
<a class="anchor" id="a7dd6a9df244ea5040c331006b9e51f96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> int UsbOpenDevice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> **&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vendor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>vendorName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>product</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>productName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a connection to the specified USB device</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>A pointer to the device pointer that is to hold the device instance </td></tr>
    <tr><td class="paramname">vendor</td><td>The vendor ID of the desired USB device </td></tr>
    <tr><td class="paramname">vendorName</td><td>The name of the vendor corresponding to the desired USB device </td></tr>
    <tr><td class="paramname">product</td><td>The product ID of the desired USB device </td></tr>
    <tr><td class="paramname">productName</td><td>The name of the USB device</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The return code that indicates whether or not an error occurred</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="usb_8h.html#a6d38a8c9d2927333c15aee5d4e118e6c">USBOPEN_SUCCESS</a> </dd>
<dd>
<a class="el" href="usb_8h.html#a7740d6b3c1581a07523be3b3d5039c95">USBOPEN_ERR_ACCESS</a> </dd>
<dd>
<a class="el" href="usb_8h.html#a0d2858ff0ca8d95aaf31876e1535a4db">USBOPEN_ERR_IO</a> </dd>
<dd>
<a class="el" href="usb_8h.html#aeffd7f45947b1e146f8dfc1c6d94704e">USBOPEN_ERR_NOTFOUND</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aaae4536e883a0f5e6691a72c7dfecd06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usb_8h.html#af83a0ad9d707a0bc5fe281b6e5c358a1">DllExport</a> int UsbSendData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb_8h.html#ae832d2d7286727b3840f0de971c9f16b">usbDevice_t</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="usb_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="usb_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>dataToSend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="usb_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>outBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>outBufferLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send and receive data over USB (Windows)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td></td></tr>
    <tr><td class="paramname">command</td><td>to send to the device </td></tr>
    <tr><td class="paramname">dataToSend</td><td>The data buffer to be sent </td></tr>
    <tr><td class="paramname">length</td><td>The length of the data to send </td></tr>
    <tr><td class="paramname">outBuffer</td><td>The buffer to hold response (8 characters) </td></tr>
    <tr><td class="paramname">outBufferLength</td><td>The expected length of the response data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>length The length of the data received</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="usb_8h.html#a65528c74adc6691eac2c7a2f39328064">CONNECT</a> </dd>
<dd>
<a class="el" href="usb_8h.html#a587604e6f3570c0fc32794384d4d0d1f">DISCONNECT</a> </dd>
<dd>
<a class="el" href="usb_8h.html#a1f10b8ba5835d94b044aff121dd2b839">TRANSMIT</a> </dd>
<dd>
<a class="el" href="usb_8h.html#a9c2a9f31eb25bedeee8376d32d682c31">DEVICE_NOT_OPEN</a> </dd>
<dd>
<a class="el" href="usb_8h.html#a3c5f4e9cbf42e1b7b7532fac1fe7c5c4">OUTBUF_EXCEEDS_MAX</a> </dd>
<dd>
<a class="el" href="usb_8h.html#a5e0a37287e4c5120029839cf331cb1c2">MULTIPLE_TRANSMISSION_REQUIRED</a> </dd>
<dd>
<a class="el" href="usb_8h.html#afacc31d698613eacdbb0ded97ecf9f3a">TRANSMISSION_FAILED</a> </dd>
<dd>
<a class="el" href="usb_8h.html#af5a8d2267dd3844efdc023b036b9465c">RECEIVE_FAILED</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 23 2012 10:26:15 for OSUisp2 USB Interface Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
